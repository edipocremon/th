<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Introduction | TerraHidro User Manual</title>
  <meta name="description" content="The TerraHidro Manual is a practical, task-oriented guide to hydrological and geomorphometric processing with TerraHidro. It covers setup (Command-Line Interface and QGIS plugin), required data formats, and step-by-step workflows to build a hydrologically conditioned DEM. Each tool includes concise theory, parameters, command examples, and figures, followed by end-to-end examples for flow direction, contributing area, drainage/watershed delineation, and export for GIS." />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Introduction | TerraHidro User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/fig/logo_terrahidro.jpg" />
  <meta property="og:description" content="The TerraHidro Manual is a practical, task-oriented guide to hydrological and geomorphometric processing with TerraHidro. It covers setup (Command-Line Interface and QGIS plugin), required data formats, and step-by-step workflows to build a hydrologically conditioned DEM. Each tool includes concise theory, parameters, command examples, and figures, followed by end-to-end examples for flow direction, contributing area, drainage/watershed delineation, and export for GIS." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Introduction | TerraHidro User Manual" />
  
  <meta name="twitter:description" content="The TerraHidro Manual is a practical, task-oriented guide to hydrological and geomorphometric processing with TerraHidro. It covers setup (Command-Line Interface and QGIS plugin), required data formats, and step-by-step workflows to build a hydrologically conditioned DEM. Each tool includes concise theory, parameters, command examples, and figures, followed by end-to-end examples for flow direction, contributing area, drainage/watershed delineation, and export for GIS." />
  <meta name="twitter:image" content="/fig/logo_terrahidro.jpg" />

<meta name="author" content="Division of Earth Observation and Geoinformatics - DIOTG" />


<meta name="date" content="2025-10-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="hydrological-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TerraHidro User Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like https://bookdown.org/yihui/bookdown</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#project-highlights"><i class="fa fa-check"></i>Project Highlights</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#qgis-plugin-installation-and-setup"><i class="fa fa-check"></i>QGIS Plugin Installation and Setup</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#installing-the-terrahidro-plugin-in-qgis"><i class="fa fa-check"></i>Installing the TerraHidro Plugin in QGIS</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#configuring-the-terrahidro-environment-variable-windows"><i class="fa fa-check"></i>Configuring the <code>TERRAHIDRO</code> Environment Variable (Windows)</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#final-step"><i class="fa fa-check"></i>Final Step</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#command-line-interface"><i class="fa fa-check"></i>Command-Line Interface</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#example-removing-pits-with-the-pfs-operation"><i class="fa fa-check"></i>Example: Removing Pits with the <code>pfs</code> Operation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html"><i class="fa fa-check"></i><b>3</b> Hydrological Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#DEM-Pre-processing-and-Correction"><i class="fa fa-check"></i><b>3.1</b> DEM Pre-processing and Correction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#simplepits"><i class="fa fa-check"></i><b>3.1.1</b> simplepits</a></li>
<li class="chapter" data-level="3.1.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#agreedem"><i class="fa fa-check"></i><b>3.1.2</b> agreedem</a></li>
<li class="chapter" data-level="3.1.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#carve"><i class="fa fa-check"></i><b>3.1.3</b> carve</a></li>
<li class="chapter" data-level="3.1.4" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#carvev"><i class="fa fa-check"></i><b>3.1.4</b> carvev</a></li>
<li class="chapter" data-level="3.1.5" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#fill"><i class="fa fa-check"></i><b>3.1.5</b> fill</a></li>
<li class="chapter" data-level="3.1.6" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#flatareas"><i class="fa fa-check"></i><b>3.1.6</b> flatareas</a></li>
<li class="chapter" data-level="3.1.7" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#pfs"><i class="fa fa-check"></i><b>3.1.7</b> pfs</a></li>
<li class="chapter" data-level="3.1.8" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#pfsd"><i class="fa fa-check"></i><b>3.1.8</b> pfsd</a></li>
<li class="chapter" data-level="3.1.9" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#removepits"><i class="fa fa-check"></i><b>3.1.9</b> removepits</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#Flow-Analysis-Drainage-Network-Extraction-and-Characterization"><i class="fa fa-check"></i><b>3.2</b> Flow Analysis, Drainage Network Extraction and Characterization</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#d8"><i class="fa fa-check"></i><b>3.2.1</b> d8</a></li>
<li class="chapter" data-level="3.2.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#d8ca"><i class="fa fa-check"></i><b>3.2.2</b> d8ca</a></li>
<li class="chapter" data-level="3.2.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#d8drainage"><i class="fa fa-check"></i><b>3.2.3</b> d8drainage</a></li>
<li class="chapter" data-level="3.2.4" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#d8drainagev"><i class="fa fa-check"></i><b>3.2.4</b> d8drainagev</a></li>
<li class="chapter" data-level="3.2.5" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#segments"><i class="fa fa-check"></i><b>3.2.5</b> segments</a></li>
<li class="chapter" data-level="3.2.6" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#minibasins"><i class="fa fa-check"></i><b>3.2.6</b> minibasins</a></li>
<li class="chapter" data-level="3.2.7" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#outletbasin"><i class="fa fa-check"></i><b>3.2.7</b> outletbasin</a></li>
<li class="chapter" data-level="3.2.8" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#mainriver"><i class="fa fa-check"></i><b>3.2.8</b> mainriver</a></li>
<li class="chapter" data-level="3.2.9" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#shreve"><i class="fa fa-check"></i><b>3.2.9</b> shreve</a></li>
<li class="chapter" data-level="3.2.10" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#strahler"><i class="fa fa-check"></i><b>3.2.10</b> strahler</a></li>
<li class="chapter" data-level="3.2.11" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#ottorivers"><i class="fa fa-check"></i><b>3.2.11</b> ottorivers</a></li>
<li class="chapter" data-level="3.2.12" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#mouths"><i class="fa fa-check"></i><b>3.2.12</b> mouths</a></li>
<li class="chapter" data-level="3.2.13" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#orderedmouths"><i class="fa fa-check"></i><b>3.2.13</b> orderedmouths</a></li>
<li class="chapter" data-level="3.2.14" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#ottorivers"><i class="fa fa-check"></i><b>3.2.14</b> ottorivers</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#Basin-and-Sub-basin-Delineation"><i class="fa fa-check"></i><b>3.3</b> Basin and Sub-basin Delineation</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#minibasins"><i class="fa fa-check"></i><b>3.3.1</b> minibasins</a></li>
<li class="chapter" data-level="3.3.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#outletbasin"><i class="fa fa-check"></i><b>3.3.2</b> outletbasin</a></li>
<li class="chapter" data-level="3.3.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#ottobasins"><i class="fa fa-check"></i><b>3.3.3</b> ottobasins</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#Geomorphometric-analysis"><i class="fa fa-check"></i><b>3.4</b> Geomorphometric analysis</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#tpi"><i class="fa fa-check"></i><b>3.4.1</b> tpi</a></li>
<li class="chapter" data-level="3.4.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#hand"><i class="fa fa-check"></i><b>3.4.2</b> hand</a></li>
<li class="chapter" data-level="3.4.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#sand"><i class="fa fa-check"></i><b>3.4.3</b> sand</a></li>
<li class="chapter" data-level="3.4.4" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#d8slope"><i class="fa fa-check"></i><b>3.4.4</b> d8slope</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#Applied-Hydrology-Risk-Management"><i class="fa fa-check"></i><b>3.5</b> Applied Hydrology &amp; Risk Management</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#gfplain"><i class="fa fa-check"></i><b>3.5.1</b> gfplain</a></li>
<li class="chapter" data-level="3.5.2" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#flowpath"><i class="fa fa-check"></i><b>3.5.2</b> flowpath</a></li>
<li class="chapter" data-level="3.5.3" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#damcourse"><i class="fa fa-check"></i><b>3.5.3</b> damcourse</a></li>
<li class="chapter" data-level="3.5.4" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#damsections"><i class="fa fa-check"></i><b>3.5.4</b> damsections</a></li>
<li class="chapter" data-level="3.5.5" data-path="hydrological-analysis.html"><a href="hydrological-analysis.html#dambreak"><i class="fa fa-check"></i><b>3.5.5</b> dambreak</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="parts.html"><a href="parts.html"><i class="fa fa-check"></i><b>4</b> Parts</a></li>
<li class="chapter" data-level="5" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html"><i class="fa fa-check"></i><b>5</b> Footnotes and citations</a>
<ul>
<li class="chapter" data-level="5.1" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#footnotes"><i class="fa fa-check"></i><b>5.1</b> Footnotes</a></li>
<li class="chapter" data-level="5.2" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#citations"><i class="fa fa-check"></i><b>5.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>6</b> Blocks</a>
<ul>
<li class="chapter" data-level="6.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>6.1</b> Equations</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="blocks.html"><a href="blocks.html#AverageFlowpathSlope"><i class="fa fa-check"></i><b>6.1.1</b> AverageFlowpathSlope</a></li>
<li class="chapter" data-level="6.1.2" data-path="blocks.html"><a href="blocks.html#AverageUpslopeFlowpathLength"><i class="fa fa-check"></i><b>6.1.2</b> AverageUpslopeFlowpathLength</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>6.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="6.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>6.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>7</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>7.1</b> Publishing</a></li>
<li class="chapter" data-level="7.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>7.2</b> 404 pages</a></li>
<li class="chapter" data-level="7.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>7.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">TerraHidro User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Introduction<a href="introduction.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>TerraHidro is an advanced geospatial analysis platform designed for hydrological and geomorphometric applications. Developed at the National Institute for Space Research (INPE), it provides a comprehensive suite of tools for digital elevation model (DEM) preprocessing, flow-direction modeling, watershed and stream network delineation, sink removal, floodplain mapping, and terrain analysis. Unlike traditional cartographic or visualization software, TerraHidro serves primarily as an analytical backend, seamlessly integrating with Geographic Information Systems (GIS) such as QGIS.</p>
<p>The system can be used in two main ways:</p>
<ul>
<li><p>QGIS Plugin: For users seeking a graphical workflow, TerraHidro integrates into the QGIS Processing Toolbox, providing intuitive interfaces to execute all functionalities directly within the GIS environment;</p></li>
<li><p>Command-Line Interface (CLI): TerraHidro operates as a stand-alone executable with no installation required. Users can run tools directly from a terminal or incorporate them into automated scripts for large-scale processing.</p></li>
</ul>
<p>TerraHidro supports raster data in the widely used, e.g. GeoTIFF format, and provides basic vector operations through ESRI Shapefiles.</p>
<p>By combining high-performance processing with open-source accessibility, TerraHidro enables researchers, students, and professionals to carry out hydrological modeling, geomorphological analysis, and environmental management with precision and reproducibility.</p>
<div id="project-highlights" class="section level3 unnumbered hasAnchor">
<h3>Project Highlights<a href="introduction.html#project-highlights" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="prom-box prom-box-default shadow1" style="background: #C7E2FF; color: #101010; font-size: 16px; line-height: 1.7;">
<ul>
<li>
<strong>Graph-based flow representation</strong> that unifies local flow across digital elevation models;
</li>
<li>
<strong>Drainage extraction with pit handling</strong> using methods such as Priority First Search (PFS) to remove spurious depressions and connect flow in flat areas;
</li>
<li>
<strong>Large-basin workflows</strong>, with applications demonstrated for Amazon sub-basins;
</li>
<li>
<strong>Flexible integration</strong> on TerraLib (C++), with bindings that enable coupling to other hydrological components;
</li>
<li>
<strong>Operational efficiency</strong> from graph traversal and storage, supporting scalable accumulation and network operations;
</li>
<li>
<strong>Open architecture</strong> that encourages extension and integration in broader GIS environments.
</li>
</ul>
</div>
</div>
<div id="qgis-plugin-installation-and-setup" class="section level2 unnumbered hasAnchor">
<h2>QGIS Plugin Installation and Setup<a href="introduction.html#qgis-plugin-installation-and-setup" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The TerraHidro plugin for the QGIS Processing Toolbox provides users with interfaces that allow all TerraHidro functionalities to be executed directly inside QGIS. However, please note that simply installing the plugin does not guarantee its functionality. It is also necessary to configure an environment variable named <code>TERRAHIDRO</code> that points to the directory where the TerraHidro executable was extracted.</p>
<div id="installing-the-terrahidro-plugin-in-qgis" class="section level3 unnumbered hasAnchor">
<h3>Installing the TerraHidro Plugin in QGIS<a href="introduction.html#installing-the-terrahidro-plugin-in-qgis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Open QGIS.<br />
</li>
<li>Go to <strong>Plugins &gt; Manage and Install Plugins…</strong><br />
</li>
<li>In the search box, type <strong>“terrahidro”</strong>.<br />
</li>
<li>Select the <strong>TerraHidro plugin</strong> and click <strong>Install Plugin</strong>.<br />
</li>
<li>Make sure to check the option <strong>“Show experimental plugins”</strong> under <em>Options</em> in the left menu.</li>
</ol>
<p><img src="fig/th_plugin.png" /></p>
<p>After installation, the TerraHidro plugin will appear in the <strong>Processing Toolbox</strong>.</p>
<p><img src="fig/th_toolbox.png" /></p>
<hr />
</div>
<div id="configuring-the-terrahidro-environment-variable-windows" class="section level3 unnumbered hasAnchor">
<h3>Configuring the <code>TERRAHIDRO</code> Environment Variable (Windows)<a href="introduction.html#configuring-the-terrahidro-environment-variable-windows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In order for the plugin to work properly, you must configure the environment variable <code>TERRAHIDRO</code> to point to the directory where the TerraHidro executable (<code>th.exe</code>) is located. Follow these steps:</p>
<ol style="list-style-type: decimal">
<li><strong>Open the Control Panel</strong>
<ul>
<li>Press <strong>Win + S</strong> to open the search bar.<br />
</li>
<li>Type <strong>“Control Panel”</strong> and press <strong>Enter</strong>.</li>
</ul></li>
<li><strong>Access Advanced System Settings</strong>
<ul>
<li>In the Control Panel, click <strong>System and Security</strong>.<br />
</li>
<li>Click <strong>System</strong>.<br />
</li>
<li>On the left panel, click <strong>Advanced system settings</strong>.</li>
</ul></li>
<li><strong>Open Environment Variables</strong>
<ul>
<li>In the <em>System Properties</em> window, go to the <strong>Advanced</strong> tab.<br />
</li>
<li>Click the <strong>Environment Variables…</strong> button at the bottom.</li>
</ul></li>
<li><strong>Create a New User Variable</strong>
<ul>
<li>In the <em>User variables</em> section, click <strong>New</strong>.</li>
</ul></li>
<li><strong>Configure the Variable</strong>
<ul>
<li>In the <strong>Variable name</strong> field, type: <code>TERRAHIDRO</code><br />
</li>
<li>In the <strong>Variable value</strong> field, type the full path to the directory where the TerraHidro executable is located.
<ul>
<li>Example: <code>C:\Users\&lt;username&gt;\Documents\PROGRAMS\TerraHidro-5.2.0</code></li>
</ul></li>
</ul></li>
<li><strong>Save and Close</strong>
<ul>
<li>Click <strong>OK</strong> to save the new variable.<br />
</li>
<li>Click <strong>OK</strong> again to close the <em>System Properties</em> window.</li>
</ul></li>
</ol>
<hr />
</div>
<div id="final-step" class="section level3 unnumbered hasAnchor">
<h3>Final Step<a href="introduction.html#final-step" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>TERRAHIDRO</code> environment variable is now configured in your user account, pointing to the directory of the TerraHidro executable. This allows the system to locate and execute TerraHidro from any location in the command prompt or within scripts.</p>
<blockquote>
<p><strong>Important:</strong> Restart any open applications or command prompts so that they recognize the newly created environment variable.</p>
</blockquote>
</div>
</div>
<div id="command-line-interface" class="section level2 unnumbered hasAnchor">
<h2>Command-Line Interface<a href="introduction.html#command-line-interface" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>TerraHidro can be used directly from the command line, making it a flexible and efficient option for processing terrain and hydrological data. The software is distributed as a stand-alone executable, so no installation is required—just extract the files and call the program from your terminal or command prompt.</p>
<p>Before running any operation, it is important to specify the directory where the TerraHidro executable is located. For example:</p>
<p>We recommend placing both the input and output files in the same directory as the TerraHidro executable. This avoids path errors and ensures that the program can easily locate the required files.</p>
<p>The structure of TerraHidro commands is designed to be simple and intuitive. Most tools follow the general pattern:</p>
<ul>
<li><strong><code>th</code></strong> calls the TerraHidro executable.<br />
</li>
<li><strong><code>&lt;operation&gt;</code></strong> specifies the tool to be executed (for example, <code>d8</code>, <code>removepits</code>, <code>pfs</code>, <code>minibasins</code>).<br />
</li>
<li><strong><code>input.tif</code></strong> is the input raster file, usually a Digital Elevation Model (DEM).<br />
</li>
<li><strong><code>output.tif</code></strong> is the resulting raster file generated by the operation.</li>
</ul>
<p>For example, to remove pits from a DEM, the command would be:</p>
<p>This straightforward structure makes TerraHidro easy to use while still offering powerful capabilities. By storing all files in the same directory and executing commands step by step, users can build reproducible workflows for DEM preprocessing, flow-direction modeling, watershed delineation, and hydrological hazard simulations.</p>
<div id="example-removing-pits-with-the-pfs-operation" class="section level3 unnumbered hasAnchor">
<h3>Example: Removing Pits with the <code>pfs</code> Operation<a href="introduction.html#example-removing-pits-with-the-pfs-operation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following example demonstrates how to use TerraHidro from the command line:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="introduction.html#cb1-1" tabindex="-1"></a><span class="ex">C:\data</span><span class="op">&gt;</span>th pfs inputDEM.tif outputDEM.tif</span></code></pre></div>
<ul>
<li><strong><code>C:\data&gt;</code></strong> indicates the working directory where both the TerraHidro executable (<code>th.exe</code>) and the raster files are stored.<br />
</li>
<li><strong><code>th</code></strong> calls the TerraHidro program.<br />
</li>
<li><strong><code>pfs</code></strong> specifies the operation to be executed. The <em>Priority-Flood Search (PFS)</em> algorithm is applied to remove sinks or depressions (pits) from a Digital Elevation Model (DEM), generating a hydrologically consistent surface.<br />
</li>
<li><strong><code>inputDEM.tif</code></strong> is the input raster file containing the original DEM.<br />
</li>
<li><strong><code>outputDEM.tif</code></strong> is the output raster file that will be created, representing the pitless DEM.</li>
</ul>
<p>This simple command ensures that the DEM is corrected for spurious depressions, which is a fundamental preprocessing step before calculating flow directions, contributing areas, and drainage networks.</p>
<blockquote>
<p>💡 <strong>Tip – Changing the Working Directory</strong></p>
<p>Before running TerraHidro commands, make sure you are in the directory where the executable (<code>th.exe</code>) and your input/output files are located.</p>
<p>On <strong>Windows</strong>, use the <code>cd</code> command:</p>
<pre><code>cd C:\Users\&lt;username&gt;\Documents\PROGRAMS\TerraHidro-5.2.0</code></pre>
<p>On <strong>Linux/MacOS</strong>, use:</p>
<pre><code>cd /home/&lt;username&gt;/PROGRAMS/TerraHidro-5.2.0</code></pre>
<p>After changing to the correct directory, you can call TerraHidro tools directly, for example:</p>
<pre><code>th pfs inputDEM.tif outputDEM.tif</code></pre>
</blockquote>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="hydrological-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf", "_main.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
